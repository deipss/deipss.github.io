---
layout: default
title: B+树
parent: Database
nav_order: 8
---

# B+树

定义：
B+树是一种数据结构，是一个N叉排序树，每个节点通常有多个孩子，一棵B+树包含根节点、内部节点和叶子节点。
根节点可能是一个叶子节点， 也可能是一个包含两个或两个以上孩子节点的节点。

B+树通常用于数据库和操作系统的文件系统中。NTFS、ReiserFS、NSS、XFS、JFS、ReFS和BFS等文件系统都在使用B+树作为元数据索引。
B+树的特点是能够保持数据稳定有序， 其插入与修改拥有较稳定的对数时间复杂度。B+树元素自底向上插入。

![b+.png](img%2Fb%2B.png)

## 特点：

- 1 B+树包含2种类型的结点：内部结点（也称索引结点）和叶子结点。根结点本身即可以是内部结点，也可以是叶子结点。根结点的关键字个数最少可以只有1个。
- 2 m阶B+树表示了内部结点最多有m-1个关键字（或者说内部结点最多有m个子树），阶数m同时限制了叶子结点最多存储m-1个记录。
- 3 内部结点中的key都按照从小到大的顺序排列，对于内部结点中的一个key，左树中的所有key都小于它，右子树中的key都大于等于它。叶子结点中的记录也按照key的大小排列。
- 4 每个叶子结点都存有相邻叶子结点的指针，叶子结点本身依关键字的大小自小而大顺序链接。

## 为什么是B+树而不是B树呢

- B树每个节点中不仅包含数据的key值，还有data值。
  而每一个页的存储空间是有限的，如果data数据较大时将会导致每个节点能存储的key的数量很小，
  要保存同样多的key，就需要增加树的高度。树的高度每增加一层，查询时的磁盘I/O次数就增加一次，
  进而影响查询效率。而在B+Tree中，所有数据记录节点都是按照键值大小顺序存放在同一层的叶子节点上，
  而非叶子节点上只存储key值信息，这样可以大大加大每个节点存储的key值数量，降低B+树的高度。
- B+树的叶子节点上有指针进行相连，因此在做数据遍历的时候，
  只需要对叶子节点进行遍历即可，这个特性使得B+树非常适合做范围查询。

# 参考文献

- https://ivanzz1001.github.io/records/post/data-structure/2018/06/16/ds-bplustree